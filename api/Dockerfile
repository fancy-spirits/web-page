FROM node:16

WORKDIR /usr/local/app

COPY . /usr/local/app/

RUN npm ci
RUN npm run build

ENV PORT=5000
ENV DB_NAME ${POSTGRES_DB_NAME}
ENV DB_USER ${POSTGRES_FANCY_SPIRITS_USER}
ENV DB_PASSWORD ${POSTGRES_FANCY_SPIRITS_PASSWORD}

EXPOSE 5000

CMD ["node", "dist/app.js"]